<?xml version="1.0"?>
<launch>

    <arg name="limited" default="false"  doc="If true, limits joint range [-PI, PI] on all joints." />
    <arg name="paused" default="false" doc="Starts gazebo in paused mode" />
    <arg name="gui" default="true" doc="Starts gazebo gui" />
    <arg name="number" default="2"/>
    <arg name="name1" default="ur5_1" />
    <arg name="name2" default="ur5_2" />
    <arg name="origin1" default="-x -0.2 -y 0.8 -z 1.02"/>
    <arg name="origin2" default="-x -0.2 -y 0.1 -z 1.02"/>
    <arg name="grip1" default="2f_140"/>
    <arg name="grip2" default="3f" />

   <!-- startup simulated world -->
    <include file="$(find gazebo_ros)/launch/empty_world.launch">
        <arg name="world_name" default="$(find nodes)/worlds/arm_example.world"/>
        <arg name="paused" value="$(arg paused)"/>
        <arg name="gui" value="$(arg gui)"/>
    </include>


    <!-- Launch each robot separately -->
    <group if="$(eval arg('number')==1)">
        <group ns='$(arg name1)'>
            <include file='$(find ur_e_gazebo)/launch/ur5e.launch'>
                <arg name="origin" value="$(arg origin1)"/>
                <arg name="robot_name" value='$(arg name1)'/>
                <arg name='grip' value='$(arg grip1)' />
            </include>
        </group>
    </group>

    <group if="$(eval arg('number')==2)">
        <group ns='$(arg name1)'>
            <include file='$(find ur_e_gazebo)/launch/ur5e.launch'>
                <arg name="origin" value="$(arg origin1)"/>
                <arg name="robot_name" value="$(arg name1)"/>
                <arg name='grip' value='$(arg grip1)' />
            </include>
        </group>
        <group ns='$(arg name2)'>
            <include file='$(find ur_e_gazebo)/launch/ur5e.launch'>
                <arg name="origin" value="$(arg origin2)"/>
                <arg name="robot_name" value="$(arg name2)"/>
                <arg name='grip' value='$(arg grip2)' />
            </include>
        </group>
    </group>

    <!-- phantom nodes -->
    <node name="phantom" pkg="sensable_phantom_ros" type="sensable_phantom" args="-D -j $(find saw_sensable_phantom_config)/sawSensablePhantomUR5.json" output="screen"/>

</launch>